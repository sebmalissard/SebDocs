<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Linux File Permissions - SebDocs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Linux File Permissions";
        var mkdocs_page_input_path = "linux_file_permissions.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> SebDocs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Welcome to SebDocs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../arduino/">Arduino</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../autotools/">Autotools</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../backup_server/">Backup server</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../bash/">Bash</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cpp/">CPP</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../curl/">Curl</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../dns/">DNS</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../docker/">Docker</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../kernel_module/">Kernel module</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Linux File Permissions</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#viewing-standard-permissions">Viewing standard permissions</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#file-type">File type</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#read-permission">Read permission</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#write-permission">Write permission</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#execute-permission">Execute permission</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#extended-permission">Extended permission</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#modify-standard-permission">Modify standard permission</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#chmod">chmod</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#chown">chown</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#access-control-list-acl">Access Control List (ACL)</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#mount-filesystem-with-acl">Mount filesystem with ACL</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#get-acl">Get ACL</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#set-acl">Set ACL</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../linux_user_group/">Linux User Group</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../lxc/">LXC</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mount/">Mount</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../network_server/">Network server</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../pdf/">PDF</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../raspberry_pi/">Raspberry Pi</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rsa/">RSA</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ruby/">Ruby</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../samba/">Samba</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../teensy/">Teensy</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ubuntu_launcher/">Ubuntu Launcher</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../vim/">Vim</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../virtualbox/">VirtualBox</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../wifi/">Wifi</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../wildcards/">Wildcards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../xml/">XML</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">SebDocs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Linux File Permissions</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="linux-file-permissions">Linux File Permissions</h1>
<p>Sources :<br />
<a href="https://wiki.archlinux.org/index.php/File_permissions_and_attributes">https://wiki.archlinux.org/index.php/File_permissions_and_attributes</a>
<a href="https://www.mkssoftware.com/docs/man1/ls.1.asp">https://www.mkssoftware.com/docs/man1/ls.1.asp</a></p>
<h2 id="viewing-standard-permissions">Viewing standard permissions</h2>
<p>Use the <code>ls -l</code> command to view the permissions set for the contents of a directory.</p>
<pre><code class="language-sh">$ ls -l /home/$USER
total 32
drwxr-xr-x 2 seb seb 4096 déc.   7 20:05 Desktop
drwxr-xr-x 2 seb seb 4096 déc.   7 20:05 Documents
drwxr-xr-x 2 seb seb 4096 déc.   7 20:05 Downloads
drwxr-xr-x 2 seb seb 4096 déc.   7 20:05 Music
drwxr-xr-x 2 seb seb 4096 déc.   7 20:05 Pictures
drwxr-xr-x 2 seb seb 4096 déc.   7 20:05 Public
drwxr-xr-x 2 seb seb 4096 déc.   7 20:05 Templates
drwxr-xr-x 2 seb seb 4096 déc.   7 20:05 Videos
</code></pre>
<p>You can view permissions along a path with <code>namei -l</code> command.</p>
<pre><code class="language-sh">$ namei -l /home/seb/Documents/document.txt 
f: /home/seb/Documents/document.txt
drwxr-xr-x root root /
drwxr-xr-x root root home
drwxr-xr-x seb  seb  seb
drwxr-xr-x seb  seb  Documents
-rw-r--r-- seb  seb  document.txt
</code></pre>
<p>The first character is the file type, the next characters are three permission (owner, group and other) triads (read, write and execute) and the optional final character indicated an extended permission.</p>
<h3 id="file-type">File type</h3>
<table>
<thead>
<tr>
<th>Character</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>Regular file</td>
</tr>
<tr>
<td>b</td>
<td>Block device file</td>
</tr>
<tr>
<td>c</td>
<td>Character device file</td>
</tr>
<tr>
<td>d</td>
<td>Directory</td>
</tr>
<tr>
<td>l</td>
<td>Symbolic link</td>
</tr>
<tr>
<td>n</td>
<td>Network file</td>
</tr>
<tr>
<td>p</td>
<td>Named pipe</td>
</tr>
<tr>
<td>s</td>
<td>Local socket file</td>
</tr>
</tbody>
</table>
<p><a href="https://linuxconfig.org/identifying-file-types-in-linux">https://linuxconfig.org/identifying-file-types-in-linux</a></p>
<h3 id="read-permission">Read permission</h3>
<table>
<thead>
<tr>
<th>Character</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>The file cannot be read or the directory's content cannot be shown.</td>
</tr>
<tr>
<td>r</td>
<td>The file can be read or the directory's content can be shown.</td>
</tr>
</tbody>
</table>
<h3 id="write-permission">Write permission</h3>
<table>
<thead>
<tr>
<th>Character</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>The file cannot be modified or the directory's content cannot be modified.</td>
</tr>
<tr>
<td>w</td>
<td>The file can be modified or the directory's content be modified (requires the execute permission otherwise this permission has no effect).</td>
</tr>
</tbody>
</table>
<h3 id="execute-permission">Execute permission</h3>
<table>
<thead>
<tr>
<th>Character</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>The file cannot be executed or the directory cannot be accessed with cd.</td>
</tr>
<tr>
<td>x</td>
<td>The file can be executed or the directory can be accessed with cd.</td>
</tr>
<tr>
<td>s</td>
<td>Set the x permission and add the setuid bit when found in user triad or the setgid when found in the group triad.</td>
</tr>
<tr>
<td>S</td>
<td>Add the setuid bit when found in user triad or the setgid when found in the group triad.</td>
</tr>
<tr>
<td>t</td>
<td>Set the x permission and add the stickly bit when found in the others triad.</td>
</tr>
<tr>
<td>T</td>
<td>Add the stickly bit when found in the others triad.</td>
</tr>
</tbody>
</table>
<h3 id="extended-permission">Extended permission</h3>
<table>
<thead>
<tr>
<th>Character</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>No extended permission.</td>
</tr>
<tr>
<td>+</td>
<td>ACL.</td>
</tr>
<tr>
<td>.</td>
<td>SEpolicy.</td>
</tr>
</tbody>
</table>
<h2 id="modify-standard-permission">Modify standard permission</h2>
<h3 id="chmod">chmod</h3>
<p>The setuid can be enable with the following command:</p>
<pre><code>chmod 4755 file
chmod u+s file
</code></pre>
<p>setuid=4, setgid=2 and sticky=1</p>
<h3 id="chown">chown</h3>
<p>TODO</p>
<h2 id="access-control-list-acl">Access Control List (ACL)</h2>
<p><a href="https://linuxconfig.org/how-to-manage-acls-on-linux">https://linuxconfig.org/how-to-manage-acls-on-linux</a></p>
<p>ACLs are a second level of discretionary permissions, that may override the standard permissions.</p>
<h3 id="mount-filesystem-with-acl">Mount filesystem with ACL</h3>
<p>To verify that the filesystem was mounted with the acl option the <code>tune2fs -l</code> can be used:</p>
<pre><code># tune2fs -l /dev/sda5 | grep &quot;Default mount options&quot;
Default mount options:    user_xattr acl
</code></pre>
<p>If your filesystem has not been mounted with the ‘acl’ option, you can re-mount it giving the needed option:</p>
<pre><code># mount -o remount -o acl /dev/sda1
</code></pre>
<p>However, notice that the mount options set this way, will not be persistent, and will not survive a reboot. If you want to obtain persistence, you have to modify the filesystem mount options in /etc/fstab, assigning the ‘acl’ option statically.</p>
<h2 id="get-acl">Get ACL</h2>
<p>The command to get acl information is getfacl.</p>
<pre><code>$ ls -al document.txt 
-rw-rw-r--+ 1 seb seb 9 mars  13 20:41 document.txt
$ getfacl document.txt 
# file: document.txt
# owner: seb
# group: seb
user::rw-
user:toto:rw-
group::r--
mask::rw-
other::r--
</code></pre>
<p>With ACL, the group triad is replace by the ACL mask.</p>
<p>Note: If the file had not acl, the standard permission are display.</p>
<pre><code>$ ls -l file.txt 
-rw-r--r-- 1 seb seb 0 mars  13 21:48 file.txt
$ getfacl file.txt 
# file: file.txt
# owner: seb
# group: seb
user::rw-
group::r--
other::r--
</code></pre>
<h2 id="set-acl">Set ACL</h2>
<p>The command to set acl information is setfacl.</p>
<pre><code>$ setfacl -m u:toto:rw document.txt
</code></pre>
<p>With acl a mask is applied to the other ACL permission (except for owner permission). Example:</p>
<pre><code>$ setfacl -m g::rw document.txt
$ setfacl -m mask:r document.txt
$ getfacl document.txt 
# file: document.txt
# owner: seb
# group: seb
user::rw-
user:toto:rw-  #effective:r--
group::rw-  #effective:r--
mask::r--
other::r--
$ ls -l document.txt 
-rw-r--r--+ 1 seb seb 9 mars  13 20:41 document.txt
</code></pre>
<p>Example to set several permission in the same command with setfacl -m:</p>
<pre><code>$ setfacl -m user::rx,other::rwx document.txt
$ getfacl document.txt 
# file: document.txt
# owner: seb
# group: seb
user::r-x
user:toto
group::rw-
mask::rw-
other::rwx
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../kernel_module/" class="btn btn-neutral float-left" title="Kernel module"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../linux_user_group/" class="btn btn-neutral float-right" title="Linux User Group">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../kernel_module/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../linux_user_group/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
